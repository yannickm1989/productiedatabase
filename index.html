<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Production Input</title>
<style>
body {
    font-family: Arial;
    padding: 20px;
    background: #f5f5f5;
}
.app {
    max-width: 650px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
label {
    font-weight: bold;
    display:block;
    margin-top:10px;
}
input, select {
    width: 100%;
    padding: 8px;
    margin-top:5px;
}
button {
    padding: 10px;
    width: 100%;
    font-size: 18px;
    margin-top:15px;
    border: none;
    border-radius: 10px;
    background: #28a745;
    color: white;
    cursor:pointer;
}
#output {
    margin-top: 20px;
    font-size: 16px;
    color: green;
}
.tab-buttons {
    display:flex;
    gap:10px;
    margin-bottom:15px;
}
.tab-buttons button {
    flex:1;
    font-size:16px;
    background:#e0e0e0;
    color:#333;
    padding:8px;
    border-radius:8px;
    border:none;
    cursor:pointer;
}
.tab-buttons button.active {
    background:#28a745;
    color:white;
    font-weight:bold;
}
.title-bar {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #28a745;
    color: white;
    padding: 10px;
    border-radius: 8px;
    margin-bottom: 15px;
}
.title-bar img {
    position: absolute;
    left: 10px;
    height: 50px;
}
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
}
th, td {
    border: 1px solid #ccc;
    padding: 5px;
    font-size: 14px;
    text-align: left;
}
th {
    background: #28a745;
    color: white;
}
</style>
</head>

<body>
<div class="app">

<div class="title-bar">
    <img src="ym.png" alt="YM">
    <h2>Production Input</h2>
</div>

<div class="tab-buttons">
    <button id="tab1" class="active">Input</button>
    <button id="tab2">Overview</button>
</div>

<div id="tabContent">

<!-- INPUT TAB -->
<div id="inputTab">
<label>Item Number:</label>
<input type="text" id="itemNumber">

<label>Description:</label>
<input type="text" id="description">

<label>Can Volume (cl):</label>
<input type="number" id="canVolume">

<label>Lid:</label>
<input type="text" id="lid">

<label>Can:</label>
<input type="text" id="can">

<label>Secondary Wrap:</label>
<input type="text" id="secondaryWrap">

<label>Tertiary Wrap:</label>
<input type="text" id="tertiaryWrap">

<label>Top Wrap:</label>
<input type="text" id="topWrap">

<label>Pallet:</label>
<input type="text" id="pallet">

<label>Interlayer:</label>
<input type="text" id="interlayer">

<label>Stack Program:</label>
<input type="text" id="stackProgram">

<label>Number of Layers:</label>
<input type="number" id="numberOfLayers">

<label>Per Layer:</label>
<input type="number" id="perLayer">

<label>Tray:</label>
<input type="text" id="tray">

<label>Wrap:</label>
<input type="text" id="wrap">

<label>Per Pack:</label>
<input type="number" id="perPack">

<label>Per Tray/Box:</label>
<input type="number" id="perTray">

<label>Interlayer Position:</label>
<input type="text" id="interlayerPosition">

<button type="button" onclick="saveData()">Save</button>
<div id="output"></div>
</div>

<!-- OVERVIEW TAB -->
<div id="overviewTab" style="display:none">
    <label>Filter by Item Number:</label>
    <input type="text" id="filterItem" placeholder="Enter item number">
    <button type="button" onclick="loadData()">Apply Filter</button>

    <table>
        <thead>
            <tr>
                <th>Item Number</th>
                <th>Description</th>
                <th>Can Volume</th>
                <th>Lid</th>
                <th>Can</th>
                <th>Secondary Wrap</th>
                <th>Tertiary Wrap</th>
                <th>Top Wrap</th>
                <th>Pallet</th>
                <th>Interlayer</th>
                <th>Stack Program</th>
                <th>Number of Layers</th>
                <th>Per Layer</th>
                <th>Tray</th>
                <th>Wrap</th>
                <th>Per Pack</th>
                <th>Per Tray/Box</th>
                <th>Interlayer Position</th>
            </tr>
        </thead>
        <tbody id="recordsTable"></tbody>
    </table>
</div>

</div>
</div>

<!-- Firebase v12 Modules -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-analytics.js";
import { getFirestore, collection, addDoc, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

// Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyBtV-MNtSxf7mJ5RM5dS_5MeRdpcOMy6a4",
  authDomain: "productiedatabase.firebaseapp.com",
  projectId: "productiedatabase",
  storageBucket: "productiedatabase.firebasestorage.app",
  messagingSenderId: "269980901692",
  appId: "1:269980901692:web:642b70f033694811817e39",
  measurementId: "G-PR7CLHVM0T"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
const db = getFirestore(app);

// TAB LOGIC
const tab1 = document.getElementById("tab1");
const tab2 = document.getElementById("tab2");
const inputTab = document.getElementById("inputTab");
const overviewTab = document.getElementById("overviewTab");

tab1.onclick = () => {
    tab1.classList.add("active"); tab2.classList.remove("active");
    inputTab.style.display = "block"; overviewTab.style.display = "none";
};
tab2.onclick = () => {
    tab2.classList.add("active"); tab1.classList.remove("active");
    inputTab.style.display = "none"; overviewTab.style.display = "block";
    loadData();
};

// SAVE DATA FUNCTION
async function saveData() {
    const data = {
        itemNumber: document.getElementById("itemNumber").value,
        description: document.getElementById("description").value,
        canVolume: parseFloat(document.getElementById("canVolume").value),
        lid: document.getElementById("lid").value,
        can: document.getElementById("can").value,
        secondaryWrap: document.getElementById("secondaryWrap").value,
        tertiaryWrap: document.getElementById("tertiaryWrap").value,
        topWrap: document.getElementById("topWrap").value,
        pallet: document.getElementById("pallet").value,
        interlayer: document.getElementById("interlayer").value,
        stackProgram: document.getElementById("stackProgram").value,
        numberOfLayers: parseInt(document.getElementById("numberOfLayers").value),
        perLayer: parseInt(document.getElementById("perLayer").value),
        tray: document.getElementById("tray").value,
        wrap: document.getElementById("wrap").value,
        perPack: parseInt(document.getElementById("perPack").value),
        perTray: parseInt(document.ge
