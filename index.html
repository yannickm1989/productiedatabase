<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>Productiedatabase</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    margin: 0;
}

header {
    background: #2e7d32;
    color: white;
    padding: 15px;
    text-align: center;
    font-size: 24px;
    font-weight: bold;
}

.container {
    padding: 20px;
    max-width: 900px;
    margin: auto;
}

.section {
    background: white;
    padding: 15px;
    margin-bottom: 20px;
    border-radius: 6px;
}

.section h2 {
    margin-top: 0;
    color: #2e7d32;
}

label {
    display: block;
    margin-top: 10px;
    font-weight: bold;
}

input {
    width: 100%;
    padding: 6px;
    margin-top: 4px;
}

button {
    margin-top: 15px;
    padding: 10px;
    background: #2e7d32;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

button:hover {
    background: #256428;
}

.result {
    background: #f1f8f4;
    padding: 10px;
    margin-top: 10px;
    border-radius: 4px;
}

.output {
    margin-top: 10px;
    font-weight: bold;
}
</style>
</head>

<body>

<header>Productiedatabase</header>

<div class="container">

<div class="section">
<h2>Artikel invoeren</h2>

<label>Artikelnummer</label>
<input id="artikelnummer">

<label>Omschrijving</label>
<input id="omschrijving">

<label>Blikinhoud (liter)</label>
<input id="blikinhoud" type="number">

<label>Deksel</label>
<input id="deksel">

<label>Blik</label>
<input id="blik">

<label>Secundaire folie</label>
<input id="secFolie">

<label>Tertiaire folie</label>
<input id="terFolie">

<label>Tertiaire topfolie</label>
<input id="topFolie">

<label>Pallet</label>
<input id="pallet">

<label>Tussenlegger</label>
<input id="tussenlegger">

<label>Stapelprogramma</label>
<input id="stapelprogramma">

<label>Aantal lagen</label>
<input id="aantalLagen" type="number">

<label>Hoeveel per laag</label>
<input id="perLaag" type="number">

<label>Tray</label>
<input id="tray">

<label>Wrap</label>
<input id="wrap">

<label>Hoeveel per pak</label>
<input id="perPak" type="number">

<label>Hoeveel per tray / doos</label>
<input id="perTray" type="number">

<label>Plaats tussenleggers</label>
<input id="plaatsTussenleggers">

<button onclick="opslaan()">Opslaan</button>
<div id="output" class="output"></div>
</div>

<div class="section">
<h2>Artikel opzoeken</h2>

<label>Zoek op artikelnummer OF omschrijving</label>
<input id="zoekveld">

<button onclick="zoekArtikel()">Zoeken</button>

<div id="resultaten"></div>
</div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

const firebaseConfig = {
    apiKey: "AIzaSyBtV-MNtSxf7mJ5RM5dS_5MeRdpcOMy6a4",
    authDomain: "productiedatabase.firebaseapp.com",
    projectId: "productiedatabase",
    storageBucket: "productiedatabase.firebasestorage.app",
    messagingSenderId: "269980901692",
    appId: "1:269980901692:web:642b70f033694811817e39"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// OPSLAAN
window.opslaan = async function () {
    const data = {
        artikelnummer: artikelnummer.value,
        omschrijving: omschrijving.value,
        blikinhoud: blikinhoud.value,
        deksel: deksel.value,
        blik: blik.value,
        secFolie: secFolie.value,
        terFolie: terFolie.value,
        topFolie: topFolie.value,
        pallet: pallet.value,
        tussenlegger: tussenlegger.value,
        stapelprogramma: stapelprogramma.value,
        aantalLagen: aantalLagen.value,
        perLaag: perLaag.value,
        tray: tray.value,
        wrap: wrap.value,
        perPak: perPak.value,
        perTray: perTray.value,
        plaatsTussenleggers: plaatsTussenleggers.value,
        timestamp: new Date()
    };

    if (!data.artikelnummer || !data.omschrijving) {
        output.innerText = "Artikelnummer en omschrijving zijn verplicht";
        return;
    }

    await addDoc(collection(db, "productie"), data);
    output.innerText = "Artikel opgeslagen";
};

// ZOEKEN (artikelnummer OF omschrijving)
window.zoekArtikel = async function () {
    const zoek = zoekveld.value.toLowerCase();
    resultaten.innerHTML = "";

    const snapshot = await getDocs(collection(db, "productie"));

    snapshot.forEach(doc => {
        const d = doc.data();
        if (
            d.artikelnummer.toLowerCase().includes(zoek) ||
            d.omschrijving.toLowerCase().includes(zoek)
        ) {
            resultaten.innerHTML += `
            <div class="result">
                <strong>Artikelnummer:</strong> ${d.artikelnummer}<br>
                <strong>Omschrijving:</strong> ${d.omschrijving}<br>
                <strong>Blikinhoud:</strong> ${d.blikinhoud}<br>
                <strong>Deksel:</strong> ${d.deksel}<br>
                <strong>Blik:</strong> ${d.blik}<br>
                <strong>Secundaire folie:</strong> ${d.secFolie}<br>
                <strong>Tertiaire folie:</strong> ${d.terFolie}<br>
                <strong>Topfolie:</strong> ${d.topFolie}<br>
                <strong>Pallet:</strong> ${d.pallet}<br>
                <strong>Tussenlegger:</strong> ${d.tussenlegger}<br>
                <strong>Stapelprogramma:</strong> ${d.stapelprogramma}<br>
                <strong>Aantal lagen:</strong> ${d.aantalLagen}<br>
                <strong>Per laag:</strong> ${d.perLaag}<br>
                <strong>Tray:</strong> ${d.tray}<br>
                <strong>Wrap:</strong> ${d.wrap}<br>
                <strong>Per pak:</strong> ${d.perPak}<br>
                <strong>Per tray:</strong> ${d.perTray}<br>
                <strong>Plaats tussenleggers:</strong> ${d.plaatsTussenleggers}
            </div>`;
        }
    });
};
</script>

</body>
</html>
