<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Productiedatabase</title>

<style>
body {
    font-family: Arial;
    background: #f5f5f5;
    padding: 20px;
}

.app {
    max-width: 450px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

/* TITELBALK */
.title-bar {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #28a745;
    color: white;
    padding: 10px;
    border-radius: 8px;
    margin-bottom: 15px;
}

.title-bar img {
    position: absolute;
    left: 10px;
    height: 40px;
}

/* TABS */
.tab-buttons {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
}

.tab-buttons button {
    flex: 1;
    padding: 8px;
    border: none;
    border-radius: 8px;
    background: #e0e0e0;
    cursor: pointer;
    font-size: 15px;
}

.tab-buttons button.active {
    background: #28a745;
    color: white;
    font-weight: bold;
}

label {
    font-weight: bold;
    display: block;
    margin-top: 10px;
}

input {
    width: 100%;
    padding: 8px;
    margin-top: 4px;
}

button.action {
    width: 100%;
    margin-top: 15px;
    padding: 10px;
    background: #28a745;
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 16px;
    cursor: pointer;
}

.output {
    margin-top: 10px;
    font-weight: bold;
}

.result {
    background: #f1f8f4;
    padding: 10px;
    margin-top: 10px;
    border-radius: 6px;
}

/* TAB CONTENT */
.tab {
    display: none;
}

.tab.active {
    display: block;
}
</style>
</head>

<body>

<div class="app">

<div class="title-bar">
    <img src="ym.png" alt="YM">
    <h2>Productiedatabase</h2>
</div>

<div class="tab-buttons">
    <button id="tabInvoer" class="active">Artikel invoeren</button>
    <button id="tabZoeken">Artikel opzoeken</button>
</div>

<!-- TAB 1: INVOER -->
<div id="invoer" class="tab active">

<label>Artikelnummer</label><input id="artikelnummer">
<label>Omschrijving</label><input id="omschrijving">
<label>Blikinhoud</label><input id="blikinhoud">
<label>Deksel</label><input id="deksel">
<label>Blik</label><input id="blik">
<label>Secundaire folie</label><input id="secFolie">
<label>Tertiaire folie</label><input id="terFolie">
<label>Tertiaire topfolie</label><input id="topFolie">
<label>Pallet</label><input id="pallet">
<label>Tussenlegger</label><input id="tussenlegger">
<label>Stapelprogramma</label><input id="stapelprogramma">
<label>Aantal lagen</label><input id="aantalLagen">
<label>Hoeveel per laag</label><input id="perLaag">
<label>Tray</label><input id="tray">
<label>Wrap</label><input id="wrap">
<label>Hoeveel per pak</label><input id="perPak">
<label>Hoeveel per tray / doos</label><input id="perTray">
<label>Plaats tussenleggers</label><input id="plaatsTussenleggers">

<button class="action" onclick="opslaan()">Opslaan</button>
<div id="output" class="output"></div>
</div>

<!-- TAB 2: ZOEKEN -->
<div id="zoeken" class="tab">

<label>Zoek op artikelnummer of omschrijving</label>
<input id="zoekveld">

<button class="action" onclick="zoekArtikel()">Zoeken</button>

<div id="resultaten"></div>
</div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBtV-MNtSxf7mJ5RM5dS_5MeRdpcOMy6a4",
  authDomain: "productiedatabase.firebaseapp.com",
  projectId: "productiedatabase",
  storageBucket: "productiedatabase.firebasestorage.app",
  messagingSenderId: "269980901692",
  appId: "1:269980901692:web:642b70f033694811817e39"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* TABS */
const tabInvoerBtn = document.getElementById("tabInvoer");
const tabZoekenBtn = document.getElementById("tabZoeken");
const invoerTab = document.getElementById("invoer");
const zoekenTab = document.getElementById("zoeken");

tabInvoerBtn.onclick = () => {
    tabInvoerBtn.classList.add("active");
    tabZoekenBtn.classList.remove("active");
    invoerTab.classList.add("active");
    zoekenTab.classList.remove("active");
};

tabZoekenBtn.onclick = () => {
    tabZoekenBtn.classList.add("active");
    tabInvoerBtn.classList.remove("active");
    zoekenTab.classList.add("active");
    invoerTab.classList.remove("active");
};

/* OPSLAAN */
window.opslaan = async () => {
    if (!artikelnummer.value || !omschrijving.value) {
        output.style.color = "red";
        output.innerText = "Artikelnummer en omschrijving zijn verplicht";
        return;
    }

    await addDoc(collection(db, "productie"), {
        artikelnummer: artikelnummer.value,
        omschrijving: omschrijving.value,
        blikinhoud: blikinhoud.value,
        deksel: deksel.value,
        blik: blik.value,
        secFolie: secFolie.value,
        terFolie: terFolie.value,
        topFolie: topFolie.value,
        pallet: pallet.value,
        tussenlegger: tussenlegger.value,
        stapelprogramma: stapelprogramma.value,
        aantalLagen: aantalLagen.value,
        perLaag: perLaag.value,
        tray: tray.value,
        wrap: wrap.value,
        perPak: perPak.value,
        perTray: perTray.value,
        plaatsTussenleggers: plaatsTussenleggers.value,
        created: new Date()
    });

    output.style.color = "green";
    output.innerText = "Artikel opgeslagen";
};

/* ZOEKEN */
window.zoekArtikel = async () => {
    resultaten.innerHTML = "";
    const zoek = zoekveld.value.toLowerCase();
    const snap = await getDocs(collection(db, "productie"));

    snap.forEach(doc => {
        const d = doc.data();
        if (
            d.artikelnummer.toLowerCase().includes(zoek) ||
            d.omschrijving.toLowerCase().includes(zoek)
        ) {
            resultaten.innerHTML += `
            <div class="result">
                <b>${d.artikelnummer}</b><br>
                ${d.omschrijving}<br><br>
                <small>
                Blikinhoud: ${d.blikinhoud}<br>
                Deksel: ${d.deksel}<br>
                Blik: ${d.blik}<br>
                Tray: ${d.tray}<br>
                Pallet: ${d.pallet}
                </small>
            </div>`;
        }
    });
};
</script>

</body>
</html>
